% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/draw_msf.R
\name{draw_msf_summary}
\alias{draw_msf_summary}
\title{Summarize multi-draw Meta Stochastic Frontier (MSF) results}
\usage{
draw_msf_summary(res, technology_legend)
}
\arguments{
\item{res}{List of draw-level result objects. Each element is expected to be
a list with (at least) the following components:
\itemize{
\item \code{sf_estm}: coefficient-level estimates and diagnostics for
naive, group, and meta-frontiers, including a \code{draw} index.
\item \code{ef_mean}: aggregated efficiency statistics (e.g., TE0, TE,
TGR, MTE) by sample, technology, survey, and estimation type.
\item \code{el_mean}: aggregated elasticity statistics by input,
technology, and survey.
\item \code{rk_mean}: aggregated risk statistics, if available.
\item \code{ef_dist}: histogram-style efficiency distributions
(counts/weights) over value ranges (\code{range}, \code{Frqlevel}).
\item \code{rk_dist}: histogram-style risk distributions, if available.
\item \code{disagscors}: optional disaggregated efficiency summaries
by subgroup levels.
\item \code{el_samp}, \code{ef_samp}, \code{rk_samp}: observation-level
elasticities, efficiencies, and risk measures for at least the
baseline draw (usually \code{draw == 0}).
}
Each component must include a \code{draw} column that distinguishes the
baseline draw (typically \code{draw == 0}) from resampled draws
(\code{draw != 0}).}

\item{technology_legend}{Data.frame providing the mapping between numeric technology
codes and their labels, typically with at least:
\itemize{
\item \code{Tech}: numeric technology index used internally in MSF
estimation, and
\item a corresponding label column (e.g., the original \code{tvar}).
}
This is used to compute technology gaps (e.g., efficiency or
disaggregated efficiency gaps) relative to the reference technology
(smallest value in \code{  technology_legend$Tech}).}
}
\value{
A list with the following components:
\itemize{
\item \code{sf_estm}: Data.frame of jackknife summary statistics for
frontier coefficients and diagnostics across draws, with columns such
as \code{Estimate}, \code{Estimate.mean}, \code{Estimate.sd},
\code{Estimate.length}, \code{jack_zv}, and \code{jack_pv}, indexed by
\code{Survey}, \code{CoefName}, \code{Tech}, \code{sample}, and
\code{restrict}.
\item \code{ef_mean}: Jackknife summaries for efficiency statistics
(TE0, TE, TGR, MTE), by sample, technology, survey, type, estimation
type, statistic, and restriction.
\item \code{el_mean}: Jackknife summaries for elasticity statistics,
by input, technology, survey, statistic, and restriction.
\item \code{rk_mean}: (If available) jackknife summaries for risk
statistics, with \code{type = "risk"}.
\item \code{ef_dist}: Jackknife summaries of efficiency distributions
(counts and weights) over ranges, with \code{stat} indicating whether
the row refers to counts or weights.
\item \code{rk_dist}: (If available) jackknife summaries of risk
distributions over ranges, with \code{type = "risk"}.
\item \code{disagscors}: (If available) jackknife summaries for
disaggregated efficiency statistics and their gaps by subgroup level
and technology.
\item \code{el_samp}: Observation-level elasticity outputs from the
first draw in \code{res} (typically the baseline draw).
\item \code{ef_samp}: Observation-level efficiency scores from the
first draw in \code{res}.
\item \code{rk_samp}: Observation-level risk measures from the first
draw in \code{res}.
}
}
\description{
Aggregates results from multiple stochastic frontier analysis (SFA) / MSF
draws (e.g., from a bootstrap or jackknife procedure) and computes
jackknife-style summary statistics for coefficients, efficiency scores,
elasticities, risk measures, and their distributions.
}
\details{
The function assumes each element of \code{res} is the output of a single
draw from an MSF pipeline (e.g., \code{msf_workhorse()} followed by
\code{draw_msf_estimations()}), containing components such as:
\code{sf_estm}, \code{ef_mean}, \code{el_mean}, \code{rk_mean},
\code{ef_dist}, \code{rk_dist}, and (optionally) \code{disagscors}.

For each component, the function:
\enumerate{
\item Stacks all draws using \code{data.table::rbindlist()}.
\item Drops non-finite values (\code{NA}, \code{Inf}, \code{-Inf}, \code{NaN}).
\item For each statistic (e.g., coefficient estimate, mean efficiency),
identifies the baseline draw (\code{draw == 0}) and joins it with
resampled draws (\code{draw != 0}) aggregated via
\code{doBy::summaryBy()} to compute:
\itemize{
\item \code{Estimate.mean}: mean across non-baseline draws,
\item \code{Estimate.sd}: standard deviation across non-baseline draws,
\item \code{Estimate.length}: number of non-baseline draws.
}
\item Computes a jackknife-style test statistic and p-value:
\itemize{
\item \code{jack_zv = Estimate / Estimate.sd},
\item \code{jack_pv = 2 * (1 - pt(|jack_zv|, df = Estimate.length))},
}
where \code{Estimate} is the baseline draw statistic and the
distribution of resampled draws is treated as a reference distribution.
}

For disaggregated scores (\code{disagscors}), the function also:
\itemize{
\item Computes technology-specific disaggregated efficiency gaps
(level and percent) relative to the reference technology in
\code{  technology_legend}, and
\item Aggregates these gaps across draws in the same jackknife fashion
as for the main efficiency statistics.
}
}
